# Документація функціоналу системи інвентаризації обладнання

## Зміст

1. [Загальний огляд](#загальний-огляд)
2. [Модуль управління пристроями](#модуль-управління-пристроями)
3. [Модуль управління співробітниками](#модуль-управління-співробітниками)
4. [Модуль аутентифікації та авторизації](#модуль-аутентифікації-та-авторизації)
5. [Адміністративний модуль](#адміністративний-модуль)
6. [REST API](#rest-api)
7. [Фінансовий облік](#фінансовий-облік)
8. [QR-коди та друк](#qr-коди-та-друк)
9. [Експорт та імпорт даних](#експорт-та-імпорт-даних)
10. [Історія та аудит](#історія-та-аудит)
11. [Обслуговування та нагадування](#обслуговування-та-нагадування)
12. [Візуалізація даних](#візуалізація-даних)
13. [Безпека](#безпека)
14. [Технічні можливості](#технічні-можливості)

---

## Загальний огляд

Система інвентаризації обладнання — це комплексний веб-застосунок для управління технічними пристроями в організації. Система забезпечує повний цикл обліку: від додавання пристрою до його списання, включаючи фінансовий облік, обслуговування та інтеграцію з зовнішніми системами.

### Основні характеристики

- **Архітектура**: MVC (Model-View-Controller) з використанням Flask Blueprints
- **База даних**: SQLite (розробка) / PostgreSQL (production)
- **Frontend**: Bootstrap 5, Chart.js, HTML5-qrcode
- **Backend**: Flask 3.0.2, SQLAlchemy, Flask-Login
- **API**: RESTful API з JWT автентифікацією

---

## Модуль управління пристроями

### 1.1. CRUD операції з пристроями

#### Створення пристрою
- **Маршрут**: `/device/add`
- **Метод**: GET, POST
- **Функціонал**:
  - Додавання нового пристрою з усіма необхідними полями
  - Автоматична генерація унікального інвентарного номера (формат: YYYY-NNNN)
  - Валідація унікальності серійного номера
  - Прив'язка до міста та співробітника
  - Встановлення дати покупки та вартості
  - Налаштування інтервалу обслуговування

#### Перегляд пристроїв
- **Маршрут**: `/devices`
- **Метод**: GET
- **Функціонал**:
  - Список всіх пристроїв з пагінацією
  - Фільтрація за містом, типом, статусом
  - Пошук по всіх полях (назва, тип, серійний номер, інвентарний номер, місцезнаходження, примітки)
  - Сортування за різними полями (назва, тип, дата створення, останнє обслуговування)
  - Відображення статусу та місцезнаходження
  - Кешування списків міст для продуктивності

#### Детальна інформація про пристрій
- **Маршрут**: `/device/<id>`
- **Метод**: GET
- **Функціонал**:
  - Повна інформація про пристрій
  - Фотографії пристрою
  - Історія змін
  - Історія обслуговування
  - Фінансова інформація (вартість покупки, поточна вартість, витрати на ремонт)
  - Інформація про наступне обслуговування
  - QR-код для швидкого доступу

#### Редагування пристрою
- **Маршрут**: `/device/<id>/edit`
- **Метод**: GET, POST
- **Функціонал**:
  - Оновлення всіх полів пристрою
  - Автоматичне записування змін в історію
  - Оновлення дати наступного обслуговування
  - Валідація даних через WTForms

#### Видалення пристрою
- **Маршрут**: `/device/<id>/delete`
- **Метод**: POST
- **Функціонал**:
  - Видалення пристрою з бази даних
  - Збереження інформації про видалення в історії
  - Видалення пов'язаних фотографій
  - Видалення витрат на ремонт

### 1.2. Фотографії пристроїв

#### Завантаження фото
- **Маршрут**: `/device/<id>/add_photo`
- **Метод**: POST
- **Функціонал**:
  - Завантаження зображень (PNG, JPG, JPEG, GIF)
  - Автоматична оптимізація зображень
  - Генерація унікальних імен файлів
  - Збереження оригінального імені файлу
  - Rate limiting (20 завантажень на годину)

#### Перегляд фото
- **Маршрут**: `/uploads/<filename>`
- **Метод**: GET
- **Функціонал**:
  - Відображення фотографій пристроїв
  - Галерея фотографій на сторінці пристрою

### 1.3. Групові операції

#### Масове оновлення статусу
- **Маршрут**: `/devices/bulk-update-status`
- **Метод**: POST
- **Функціонал**:
  - Оновлення статусу для кількох пристроїв одночасно
  - Запис змін в історію для кожного пристрою
  - Перевірка прав доступу

#### Масовий експорт в Excel
- **Маршрут**: `/devices/bulk-export-excel`
- **Метод**: POST
- **Функціонал**:
  - Експорт вибраних пристроїв в Excel
  - Форматування таблиці (заголовки, кольори, вирівнювання)
  - Автоматична підгонка ширини стовпців

#### Масовий експорт в PDF
- **Маршрут**: `/devices/export_pdf`
- **Метод**: POST
- **Функціонал**:
  - Генерація PDF з інформацією про пристрої
  - Професійне форматування
  - Включення всіх необхідних даних

#### Масовий друк інвентарних карток
- **Маршрут**: `/devices/bulk_print_inventory`
- **Метод**: GET, POST
- **Функціонал**:
  - Вибір пристроїв для друку
  - Генерація PDF з інвентарними картками
  - Готовий до друку формат

### 1.4. Пошук та фільтрація

#### Розширений пошук
- Пошук по всіх полях пристрою
- Нечутливий до регістру
- Часткове співпадіння
- Комбіновані умови

#### Фільтри
- За містом
- За типом пристрою
- За статусом (В роботі, На ремонті, Списано)
- За датою створення
- За датою обслуговування

#### Сортування
- За назвою (A-Z, Z-A)
- За типом
- За серійним номером
- За інвентарним номером
- За датою створення
- За датою останнього обслуговування

---

## Модуль управління співробітниками

### 2.1. CRUD операції з співробітниками

#### Створення співробітника
- **Маршрут**: `/employees/add`
- **Метод**: GET, POST
- **Функціонал**:
  - Додавання нового співробітника
  - Заповнення контактної інформації (телефон, email)
  - Вказівка посади та відділу
  - Прив'язка до міста
  - Додавання приміток

#### Список співробітників
- **Маршрут**: `/employees`
- **Метод**: GET
- **Функціонал**:
  - Відображення всіх співробітників
  - Фільтрація за містом (для адміністраторів)
  - Відображення статусу (активний/неактивний)
  - Сортування за прізвищем

#### Детальна інформація про співробітника
- **Маршрут**: `/employees/<id>`
- **Метод**: GET
- **Функціонал**:
  - Повна інформація про співробітника
  - Список пристроїв, прив'язаних до співробітника
  - Контактна інформація
  - Історія змін

#### Редагування співробітника
- **Маршрут**: `/employees/<id>/edit`
- **Метод**: GET, POST
- **Функціонал**:
  - Оновлення всіх полів співробітника
  - Зміна міста (для адміністраторів)
  - Оновлення контактної інформації

#### Видалення співробітника
- **Маршрут**: `/employees/<id>/delete`
- **Метод**: POST
- **Функціонал**:
  - Перевірка наявності прив'язаних пристроїв
  - Видалення співробітника (якщо немає пристроїв)
  - Попередження про неможливість видалення

#### Активація/деактивація співробітника
- **Маршрут**: `/employees/<id>/toggle-active`
- **Метод**: POST
- **Функціонал**:
  - Зміна статусу активності співробітника
  - Деактивовані співробітники не відображаються в списках для призначення

---

## Модуль аутентифікації та авторизації

### 3.1. Вхід в систему

#### Авторизація користувача
- **Маршрут**: `/login`
- **Метод**: GET, POST
- **Функціонал**:
  - Вхід за логіном та паролем
  - Хешування паролів (Werkzeug)
  - Перевірка активності облікового запису
  - Rate limiting (5 спроб на хвилину)
  - Логування спроб входу
  - Перенаправлення авторизованих користувачів

### 3.2. Вихід з системи

#### Завершення сесії
- **Маршрут**: `/logout`
- **Метод**: GET
- **Функціонал**:
  - Вихід з системи
  - Очищення сесії
  - Логування виходу
  - Перенаправлення на головну сторінку

### 3.3. Рівні доступу

#### Адміністратор
- Повний доступ до всіх функцій
- Управління користувачами та містами
- Доступ до всіх пристроїв незалежно від міста
- Доступ до адміністративного панелю
- Перегляд журналу активності

#### Звичайний користувач
- Доступ тільки до пристроїв свого міста
- Обмежений доступ до функцій
- Немає доступу до адміністративного панелю
- Немає доступу до управління користувачами

---

## Адміністративний модуль

### 4.1. Управління користувачами

#### Список користувачів
- **Маршрут**: `/admin/users`
- **Метод**: GET
- **Функціонал**:
  - Відображення всіх користувачів системи
  - Інформація про статус (активний/неактивний)
  - Інформація про права доступу (адміністратор/користувач)
  - Прив'язка до міста

#### Додавання користувача
- **Маршрут**: `/admin/user/add`
- **Метод**: GET, POST
- **Функціонал**:
  - Створення нового користувача
  - Встановлення логіну та пароля
  - Вибір рівня доступу
  - Прив'язка до міста
  - Валідація унікальності логіну

#### Редагування користувача
- **Маршрут**: `/admin/user/edit/<id>`
- **Метод**: GET, POST
- **Функціонал**:
  - Оновлення інформації про користувача
  - Зміна пароля
  - Зміна рівня доступу
  - Зміна міста

#### Активація/деактивація користувача
- **Маршрут**: `/admin/user/toggle/<id>`
- **Метод**: GET
- **Функціонал**:
  - Зміна статусу активності користувача
  - Деактивовані користувачі не можуть входити в систему

#### Видалення користувача
- **Маршрут**: `/admin/user/delete/<id>`
- **Метод**: POST
- **Функціонал**:
  - Видалення користувача з системи
  - Перевірка наявності пов'язаних записів
  - Захист від видалення останнього адміністратора

### 4.2. Управління містами

#### Список міст
- **Маршрут**: `/admin/cities`
- **Метод**: GET
- **Функціонал**:
  - Відображення всіх міст
  - Кількість пристроїв у кожному місті
  - Кількість користувачів у кожному місті

#### Додавання міста
- **Маршрут**: `/admin/city/add`
- **Метод**: GET, POST
- **Функціонал**:
  - Створення нового міста
  - Валідація унікальності назви

#### Редагування міста
- **Маршрут**: `/admin/city/edit/<id>`
- **Метод**: GET, POST
- **Функціонал**:
  - Оновлення назви міста
  - Валідація унікальності

#### Видалення міста
- **Маршрут**: `/admin/city/delete/<id>`
- **Метод**: POST
- **Функціонал**:
  - Видалення міста
  - Перевірка наявності пристроїв та користувачів
  - Попередження про неможливість видалення

### 4.3. Dashboard та аналітика

#### Адміністративний dashboard
- **Маршрут**: `/admin/dashboard`
- **Метод**: GET
- **Функціонал**:
  - Загальна статистика (пристрої, користувачі, міста)
  - Розподіл пристроїв за містами (діаграма)
  - Розподіл пристроїв за типами (діаграма)
  - Розподіл пристроїв за статусами (діаграма)
  - Динаміка додавання пристроїв за 12 місяців (графік)
  - Кешування статистики (5 хвилин)
  - Інтерактивні графіки (Chart.js)

### 4.4. Журнал активності

#### Перегляд активності користувачів
- **Маршрут**: `/admin/user-activity`
- **Метод**: GET
- **Функціонал**:
  - Журнал всіх дій користувачів
  - Фільтрація за користувачем
  - Фільтрація за датою
  - Відображення IP-адреси та URL
  - Пагінація

### 4.5. Резервне копіювання

#### Створення backup
- **Маршрут**: `/admin/backup`
- **Метод**: GET, POST
- **Функціонал**:
  - Ручне створення резервної копії
  - SQL dump бази даних
  - Копія файлу бази даних
  - Відображення списку backup
  - Завантаження backup

#### Автоматичне резервне копіювання
- **Функціонал**:
  - Автоматичне створення backup щодня о 2:00
  - Очищення старих backup (за замовчуванням 30 днів)
  - Налаштування через змінні оточення
  - Логування операцій backup

---

## REST API

### 5.1. Автентифікація API

#### JWT токени
- **Маршрут**: `/api/v1/auth/login`
- **Метод**: POST
- **Функціонал**:
  - Генерація access та refresh токенів
  - Встановлення терміну дії токена
  - Збереження токенів в базі даних
  - Rate limiting (5 запитів на хвилину)

#### Оновлення токена
- **Маршрут**: `/api/v1/auth/refresh`
- **Метод**: POST
- **Функціонал**:
  - Оновлення access токена через refresh токен
  - Відкликання старого access токена
  - Генерація нового access токена

#### Відкликання токена
- **Маршрут**: `/api/v1/auth/revoke`
- **Метод**: POST
- **Функціонал**:
  - Відкликання JWT токена
  - Деактивація токена в базі даних
  - Перевірка прав доступу

#### Список токенів
- **Маршрут**: `/api/v1/auth/tokens`
- **Метод**: GET
- **Функціонал**:
  - Отримання списку всіх токенів користувача
  - Інформація про термін дії
  - Інформація про останнє використання

### 5.2. API для пристроїв

#### Отримання списку пристроїв
- **Маршрут**: `/api/v1/devices`
- **Метод**: GET
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Пагінація (page, per_page)
  - Фільтрація (city_id, type, status, search)
  - Сортування
  - Eager loading для оптимізації
  - Rate limiting (100 запитів на годину)

#### Отримання одного пристрою
- **Маршрут**: `/api/v1/devices/<id>`
- **Метод**: GET
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Повна інформація про пристрій
  - Перевірка прав доступу
  - Eager loading

#### Створення пристрою
- **Маршрут**: `/api/v1/devices`
- **Метод**: POST
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Створення нового пристрою
  - Автоматична генерація інвентарного номера
  - Валідація унікальності серійного номера
  - Запис в історію
  - Rate limiting (50 запитів на годину)

#### Оновлення пристрою
- **Маршрут**: `/api/v1/devices/<id>`
- **Метод**: PUT
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Оновлення полів пристрою
  - Запис змін в історію
  - Валідація даних
  - Rate limiting (50 запитів на годину)

#### Видалення пристрою
- **Маршрут**: `/api/v1/devices/<id>`
- **Метод**: DELETE
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Видалення пристрою
  - Запис в історію
  - Перевірка прав доступу
  - Rate limiting (20 запитів на годину)

### 5.3. API для міст

#### Отримання списку міст
- **Маршрут**: `/api/v1/cities`
- **Метод**: GET
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Список всіх міст
  - Кешування (1 година)
  - Rate limiting (100 запитів на годину)

### 5.4. API для статистики

#### Отримання статистики
- **Маршрут**: `/api/v1/stats`
- **Метод**: GET
- **Автентифікація**: JWT токен
- **Функціонал**:
  - Загальна кількість пристроїв
  - Кількість пристроїв за статусами
  - Кешування (5 хвилин)
  - Фільтрація за містом для звичайних користувачів

### 5.5. Обробка помилок API

#### Стандартні коди відповідей
- **200 OK**: Успішний запит
- **201 Created**: Ресурс створено
- **400 Bad Request**: Невірний формат запиту
- **401 Unauthorized**: Не авторизовано
- **403 Forbidden**: Немає прав доступу
- **404 Not Found**: Ресурс не знайдено
- **409 Conflict**: Конфлікт (наприклад, дублікат серійного номера)
- **429 Too Many Requests**: Перевищено ліміт запитів
- **500 Internal Server Error**: Внутрішня помилка сервера

#### Формат відповідей
- JSON формат
- Структуровані повідомлення про помилки
- Детальна інформація для діагностики

---

## Фінансовий облік

### 6.1. Вартість пристроїв

#### Вартість покупки
- Збереження вартості покупки пристрою
- Дата покупки
- Валідація числових значень

#### Поточна вартість
- **Розрахунок**: Автоматичний розрахунок з урахуванням амортизації
- **Формула**: `Поточна вартість = Вартість покупки - Амортизація`
- **Амортизація**: Лінійна амортизація з урахуванням часу експлуатації
- **Формула амортизації**: `Амортизація = Вартість покупки × (Відсоток амортизації / 100) × (Років експлуатації)`
- **Роки експлуатації**: Розрахунок на основі `365.25` днів на рік (враховує високосні роки)

### 6.2. Витрати на ремонт

#### Додавання витрат на ремонт
- **Маршрут**: `/device/<id>/add_repair_expense`
- **Метод**: POST
- **Функціонал**:
  - Додавання витрат на ремонт
  - Опис робіт
  - Дата ремонту
  - Номер накладної
  - Сума витрат

#### Список витрат на ремонт
- Відображення всіх витрат на ремонт для пристрою
- Загальна сума витрат
- Сортування за датою

### 6.3. Загальна вартість

#### Розрахунок загальної вартості
- **Формула**: `Загальна вартість = Вартість покупки + Витрати на ремонт`
- Відображення на сторінці пристрою
- Використання в звітах

---

## QR-коди та друк

### 7.1. Генерація QR-кодів

#### QR-код для пристрою
- **Маршрут**: `/device/<id>/qrcode`
- **Метод**: GET
- **Функціонал**:
  - Генерація QR-коду з інвентарним номером
  - Налаштування розміру та рамки
  - Відображення на сторінці пристрою
  - Завантаження QR-коду як зображення

#### Друк QR-коду
- **Маршрут**: `/device/<id>/print_qrcode`
- **Метод**: GET
- **Функціонал**:
  - Генерація PDF з QR-кодом
  - Готовий до друку формат
  - Включення інформації про пристрій

### 7.2. Мобільний QR-сканер

#### Сторінка сканера
- **Маршрут**: `/qr-scanner`
- **Метод**: GET
- **Функціонал**:
  - Використання камери мобільного пристрою
  - Сканування QR-кодів
  - Автоматичне перенаправлення на сторінку пристрою
  - Підтримка HTML5-qrcode

### 7.3. Друк інвентарних карток

#### Друк однієї картки
- **Маршрут**: `/device/<id>/print_inventory`
- **Метод**: GET
- **Функціонал**:
  - Генерація PDF з інвентарною карткою
  - Включення всієї інформації про пристрій
  - QR-код на картці
  - Професійне форматування

#### Масовий друк
- **Маршрут**: `/devices/bulk_print_inventory`
- **Метод**: GET, POST
- **Функціонал**:
  - Вибір пристроїв для друку
  - Генерація PDF з кількома картками
  - Оптимізація для друку

---

## Експорт та імпорт даних

### 8.1. Експорт в Excel

#### Експорт всіх пристроїв
- **Маршрут**: `/devices/export_excel`
- **Метод**: GET
- **Функціонал**:
  - Експорт всіх пристроїв в Excel
  - Форматування таблиці
  - Заголовки з кольорами
  - Автоматична підгонка ширини стовпців
  - Включення всіх полів

#### Масовий експорт
- **Маршрут**: `/devices/bulk-export-excel`
- **Метод**: POST
- **Функціонал**:
  - Експорт вибраних пристроїв
  - Той самий формат, що й повний експорт

### 8.2. Імпорт з Excel

#### Імпорт пристроїв
- **Маршрут**: `/devices/import_excel`
- **Метод**: GET, POST
- **Функціонал**:
  - Завантаження Excel файлу
  - Парсинг даних
  - Валідація даних
  - Масове створення пристроїв
  - Обробка помилок
  - Звіт про імпорт

### 8.3. Експорт в PDF

#### Експорт одного пристрою
- **Маршрут**: `/device/<id>/export_pdf`
- **Метод**: GET
- **Функціонал**:
  - Генерація PDF з інформацією про пристрій
  - Професійне форматування
  - Включення фотографій

#### Масовий експорт
- **Маршрут**: `/devices/export_pdf`
- **Метод**: POST
- **Функціонал**:
  - Генерація PDF з кількома пристроями
  - Структурований вивід

---

## Історія та аудит

### 9.1. Історія змін пристроїв

#### Перегляд історії
- **Маршрут**: `/device/<id>/history`
- **Метод**: GET
- **Функціонал**:
  - Відображення всіх змін пристрою
  - Тип дії (створення, оновлення, видалення)
  - Яке поле було змінено
  - Старе та нове значення
  - Користувач, який зробив зміну
  - Дата та час зміни
  - Сортування за датою

#### Автоматичне записування
- Запис всіх операцій CRUD
- Збереження старих та нових значень
- Збереження інформації про видалені пристрої

### 9.2. Журнал активності користувачів

#### Перегляд активності
- **Маршрут**: `/admin/user-activity`
- **Метод**: GET
- **Функціонал**:
  - Журнал всіх дій користувачів
  - Опис дії
  - IP-адреса користувача
  - URL, на якому виконувалась дія
  - Дата та час
  - Фільтрація за користувачем
  - Фільтрація за датою
  - Пагінація

#### Автоматичне логування
- Логування входу/виходу
- Логування всіх важливих операцій
- Збереження контексту (IP, URL)

---

## Обслуговування та нагадування

### 10.1. Відстеження обслуговування

#### Налаштування обслуговування
- Дата останнього обслуговування
- Інтервал обслуговування (в днях)
- Автоматичне обчислення наступного обслуговування
- Оновлення при зміні дати або інтервалу

#### Перегляд інформації
- Відображення на сторінці пристрою
- Індикація простроченого обслуговування
- Попередження про майбутнє обслуговування

### 10.2. Нагадування

#### Автоматичні нагадування
- **Функція**: `check_maintenance_reminders()`
- **Запуск**: Щодня о 9:00 (через APScheduler)
- **Функціонал**:
  - Перевірка пристроїв з простроченим обслуговуванням
  - Перевірка пристроїв з майбутнім обслуговуванням (за замовчуванням 30 днів)
  - Створення сповіщень для користувачів
  - Різні типи сповіщень (danger для прострочених, warning для майбутніх)

#### Сповіщення
- **Модель**: `Notification`
- **Типи**: danger (прострочене), warning (майбутнє)
- **Отримувачі**: Всі активні користувачі міста
- **Відображення**: На головній сторінці
- **Відмітка прочитання**: Можливість відмітити як прочитане

---

## Візуалізація даних

### 11.1. Dashboard

#### Головна сторінка
- **Маршрут**: `/`
- **Метод**: GET
- **Функціонал**:
  - Статистика пристроїв (загальна кількість, за статусами)
  - Фільтрація за містом для звичайних користувачів
  - Швидкий доступ до основних функцій

#### Адміністративний dashboard
- **Маршрут**: `/admin/dashboard`
- **Метод**: GET
- **Функціонал**:
  - Загальна статистика (пристрої, користувачі, міста)
  - Кругові діаграми (розподіл за статусами)
  - Барні діаграми (розподіл за типами, топ-10)
  - Лінійні графіки (динаміка додавання за 12 місяців)
  - Діаграми розподілу за містами
  - Інтерактивні графіки (Chart.js)
  - Кешування статистики (5 хвилин)

### 11.2. Графіки та діаграми

#### Технології
- Chart.js для візуалізації
- Адаптивні графіки
- Інтерактивні елементи
- Експорт графіків

---

## Безпека

### 12.1. Аутентифікація

#### Хешування паролів
- Використання Werkzeug для хешування
- Безпечне зберігання паролів
- Неможливість відновлення оригінального пароля

#### Сесії
- Використання Flask-Login для управління сесіями
- Автоматичне завершення сесії
- Захист від перехоплення сесій

### 12.2. Авторизація

#### Рівні доступу
- Адміністратор: повний доступ
- Звичайний користувач: обмежений доступ
- Перевірка прав доступу на кожному маршруті

#### Обмеження за містами
- Звичайні користувачі бачать тільки пристрої свого міста
- Адміністратори бачать всі пристрої
- Автоматична фільтрація в запитах

### 12.3. CSRF захист

#### Захист від CSRF атак
- Використання Flask-WTF для CSRF захисту
- Автоматична генерація токенів
- Перевірка токенів при POST запитах
- Обробка помилок CSRF

### 12.4. Rate Limiting

#### Захист від DDoS та brute force
- Глобальні обмеження (200 запитів на день, 50 на годину)
- Специфічні обмеження для окремих endpoints
- Захист API endpoints
- Захист форми входу (5 спроб на хвилину)

### 12.5. Логування

#### Структуроване логування
- JSON формат логів (для production)
- Текстовий формат (для розробки)
- Ротація логів
- Рівні логування (DEBUG, INFO, WARNING, ERROR)
- Логування помилок з повним стеком

---

## Технічні можливості

### 13.1. База даних

#### Підтримка баз даних
- **SQLite**: Для розробки та малих проєктів
- **PostgreSQL**: Для production та великих проєктів
- Автоматичне визначення типу БД через змінні оточення
- Connection pooling для PostgreSQL
- Оптимізація запитів

#### Міграції
- Використання Flask-Migrate
- Версіонування схеми БД
- Автоматична генерація міграцій
- Відкат міграцій

### 13.2. Кешування

#### Стратегії кешування
- Кешування списків міст (1 година)
- Кешування статистики (5 хвилин)
- Кешування dashboard (5 хвилин)
- Налаштування через Flask-Caching
- Підтримка різних backend (simple, redis, memcached)

### 13.3. Оптимізація запитів

#### Eager Loading
- Використання `joinedload` та `selectinload`
- Вирішення проблеми N+1 запитів
- Оптимізація завантаження пов'язаних об'єктів
- Покращення продуктивності

### 13.4. Обробка помилок

#### Глобальна обробка помилок
- Обробка 404 (Сторінка не знайдена)
- Обробка 403 (Доступ заборонено)
- Обробка 500 (Внутрішня помилка сервера)
- Обробка CSRF помилок
- Дружні повідомлення користувачам
- Детальне логування для адміністраторів

### 13.5. Health Checks

#### Моніторинг стану системи
- **Маршрут**: `/health`
- **Функціонал**: Перевірка підключення до БД
- **Маршрут**: `/ready`
- **Функціонал**: Перевірка готовності системи (БД + таблиці)

### 13.6. Автоматизація

#### Планувальник задач (APScheduler)
- Автоматичне резервне копіювання (щодня о 2:00)
- Очищення старих backup (щотижня)
- Перевірка обслуговування (щодня о 9:00)
- Налаштування через змінні оточення

### 13.7. Валідація форм

#### WTForms
- Валідація всіх форм
- Перевірка обов'язкових полів
- Перевірка форматів (email, дати)
- Перевірка унікальності
- Дружні повідомлення про помилки

### 13.8. Оптимізація зображень

#### Автоматична оптимізація
- Конвертація в оптимальний формат
- Зменшення розміру файлів
- Збереження якості
- Підтримка різних форматів

---

## Додаткові можливості

### 14.1. Адаптивний інтерфейс

#### Підтримка пристроїв
- Адаптивний дизайн (Bootstrap 5)
- Підтримка мобільних пристроїв
- Підтримка планшетів
- Оптимізація для різних розмірів екранів

### 14.2. Темна/світла тема

#### Перемикання теми
- **Маршрут**: `/toggle-theme`
- **Функціонал**:
  - Перемикання між світлою та темною темою
  - Збереження вибору в cookies
  - Автоматичне застосування при наступному відвідуванні

### 14.3. PWA підтримка

#### Progressive Web App
- Manifest.json для встановлення як додаток
- Service Worker для офлайн роботи
- Іконки для різних пристроїв
- Можливість встановлення на домашній екран

### 14.4. Мультимовність

#### Підготовка до багатомовності
- Структура для підтримки кількох мов
- Налаштування в конфігурації
- Готовність до додавання перекладів

---

## Технічні характеристики

### Статистика проєкту

- **Рядків Python коду**: ~3000+
- **Рядків HTML/JavaScript**: ~2000+
- **Маршрутів**: 50+
- **API endpoints**: 15+
- **HTML шаблонів**: 20+
- **Моделей БД**: 10

### Залежності

#### Основні
- Flask 3.0.2
- Flask-SQLAlchemy 3.1.1
- Flask-Login 0.6.3
- Flask-WTF 1.2.1
- Flask-Migrate 4.0.5
- Flask-Limiter 3.5.0
- Flask-Caching 2.1.0

#### Додаткові
- PyJWT 2.8.0 (JWT токени)
- ReportLab 4.0.1 (PDF)
- openpyxl 3.1.2 (Excel)
- qrcode 7.4.2 (QR-коди)
- Pillow 10.3.0 (обробка зображень)
- APScheduler 3.10.4 (планувальник задач)
- psycopg2-binary 2.9.9 (PostgreSQL)

---

## Висновок

Система інвентаризації обладнання надає повний функціонал для управління технічними пристроями в організації. Система включає всі необхідні модулі для ефективного обліку, відстеження та управління пристроями, включаючи фінансовий облік, обслуговування, інтеграцію через API та адміністративні функції.

Система готова до використання в production з підтримкою як SQLite (для малих проєктів), так і PostgreSQL (для великих проєктів), з повним набором функцій безпеки, оптимізації та моніторингу.

---

**Версія документа**: 1.0  
**Дата створення**: 2025  
**Останнє оновлення**: 2025

